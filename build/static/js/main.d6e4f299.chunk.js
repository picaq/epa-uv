(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,o){},5:function(e,t,o){e.exports=o(6)},6:function(e,t,o){"use strict";o.r(t);var a=o(0),n=o.n(a),c=o(3),l=o(4),r=o.n(l),s=o(1),i=o.n(s);o(11);const u=()=>{var e,t,o;const c=window.location.href.match(/\d{5}/)&&window.location.href.match(/\d{5}/)[0],[l,s]=Object(a.useState)(c||"95377"),[u,d]=Object(a.useState)(c||"94108"),[g,f]=Object(a.useState)("San Francisco, CA"),[m,v]=Object(a.useState)([]),[h,p]=Object(a.useState)(!1),[w,y]=Object(a.useState)(!1),b=new Date((new Date).toLocaleDateString()),D=new Date((new Date).setDate((new Date).getDate()+1)).toLocaleDateString(),E=new Date((new Date).setDate((new Date).getDate()-1)).toLocaleDateString(),S=new Date((new Date).toLocaleString()),[x,O]=Object(a.useState)(S.getHours()),[T,j]=Object(a.useState)(S.getMinutes()),I=b.toISOString().slice(0,10).replace(/-/g,""),[A,L]=(new Date(E).toISOString().slice(0,10).replace(/-/g,""),new Date(D).toISOString().slice(0,10).replace(/-/g,""),Object(a.useState)(I)),[C,U]=Object(a.useState)("city, state"),[k,V]=Object(a.useState)(b),[M,z]=Object(a.useState)(!1),_=["low","low","low","moderate","moderate","moderate","high","high","very high","very high","very high","extreme","extreme","extreme","extreme","extreme"],H=["\ud835\udfce","\ud835\udfcf","\ud835\udfd0","\ud835\udfd1","\ud835\udfd2","\ud835\udfd3","\ud835\udfd4","\ud835\udfd5","\ud835\udfd6","\ud835\udfd7","\ud835\udfcf\ud835\udfce","\ud835\udfcf\ud835\udfcf","\ud835\udfcf\ud835\udfd0","\ud835\udfcf\ud835\udfd1","\ud835\udfcf\ud835\udfd2","\ud835\udfcf\ud835\udfd3"];Object(a.useEffect)(()=>{const e=e=>{let{key:t}=e;return"Escape"===t&&(d(""),f(""),z(!M),void p(!1))};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[]);const P=e=>{v(null===e||void 0===e?void 0:e.filter((t,o)=>{var a,n;return 0!=t.UV_VALUE||(null===(a=e[o-1])||void 0===a?void 0:a.UV_VALUE)>0||(null===(n=e[o+1])||void 0===n?void 0:n.UV_VALUE)>0}).map(e=>[new Date(e.DATE_TIME.replace(/ AM/,":00 am").replace(/ PM/,":00 pm")).getHours(),e.UV_VALUE]))},Z=async e=>{const t=e.coords;try{const e=await fetch("https://data.epa.gov/efservice/getEnvirofactsUVHourly/LATITUDE/".concat(t.latitude,"/LONGITUDE/").concat(t.longitude,"/JSON")),o=await e.json();console.log(o),P(o),console.log(o),console.log(m);const[a,n]=[o[0].CITY,o[0].STATE];U("".concat(a,", ").concat(n)),V(new Date(o[0].DATE_TIME.split(" ")[0])),p(!1),d("")}catch(h){console.error(h.message),console.error(void 0,void 0,"is not found!")}},F=async function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(5===u.length)try{const e=await fetch("https://data.epa.gov/efservice/getEnvirofactsUVHourly/ZIP/".concat(u,"/JSON")),t=await e.json();P(t),console.log(t),console.log(m);const[o,a]=[t[0].CITY,t[0].STATE];U("".concat(o,", ").concat(a)),V(new Date(t[0].DATE_TIME.split(" ")[0])),p(!1)}catch(h){console.error(h.message),console.error(u,"is not found!"),p(!0)}},J=async()=>{if(g.match(/[a-z+], *[A-Z]{2}/i)){const e=g.trim().split(/\s*,/);try{const t=await fetch("https://data.epa.gov/efservice/getEnvirofactsUVHourly/CITY/".concat(e[0].trim(),"/STATE/").concat(e[1].trim(),"/JSON")),o=await t.json();P(o),console.log(o),console.log(m);const[a,n]=[o[0].CITY,o[0].STATE];U("".concat(a,", ").concat(n)),V(new Date(o[0].DATE_TIME.split(" ")[0])),y(!1),d("")}catch(h){console.error(h.message),console.error(g,"is not found!"),p(!0)}}},R=Object(a.useRef)(null),N=Object(a.useRef)(null);Object(a.useEffect)(()=>{const e=setInterval(()=>{new Date;j(new Date((new Date).toLocaleString()).getMinutes()),O(new Date((new Date).toLocaleString()).getHours())},2e4);return()=>clearInterval(e)},[]),Object(a.useEffect)(()=>{u.length<5&&(R.current.focus(),p(!1))},[M]),Object(a.useEffect)(()=>{g.length<3&&(N.current.focus(),p(!1))},[M]),Object(a.useEffect)(()=>{(e=>{const t=Object.fromEntries(e)[x]||"0";document.title="\ud83c\udf3b UV Index: ".concat(H[t]," ").concat(_[t]),console.log({values:e})})(m)},[x,m,u]),Object(a.useMemo)(()=>{F(A)},[u]);const Y=(e,t)=>String(e).padStart(t,"0"),$=e=>0==e||24==e?"12\u2009am":e>0&&e<12?"".concat(e,"\u2009am"):12==e?"12\u2009pm":e>12&&e<24?"".concat(e-12,"\u2009pm"):e,B={style:{color:"#ddd"},chart:{type:"spline",backgroundColor:"#eee0"},title:{text:'UV Index for <span style="opacity: '.concat(.5+u.length/10,"; fill: ").concat(h&&"#e82a0eaa","; font-style: ").concat(h&&"italic",'">').concat(u,"</span><span> ").concat(C,"</span>")},subtitle:{text:"\n      ".concat(b.getDay()===(null===(e=new Date(k))||void 0===e?void 0:e.getDay())?"Today":"Tomorrow",": ").concat(null===(t=new Date(k))||void 0===t?void 0:t.toLocaleDateString("US-en",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))},series:[{name:C,data:m,style:{},dataLabels:{enabled:!0,padding:7,color:"#555",style:{fontSize:"1rem"}},zones:[{value:1,color:"#4eb600"},{value:2,color:"#4eb600"},{value:3,color:"#99cc02"},{value:4,color:"#f8e200"},{value:5,color:"#f7b501ff"},{value:6,color:"#f88600ee"},{value:7,color:"#f95900cc"},{value:8,color:"#e82a0eaa"},{value:9,color:"#d7031a99"},{value:10,color:"#ff029888"},{value:11,color:"#b449ff"},{value:12,color:"#9a8aff"},{value:13,color:"#9a8aff"},{value:14,color:"#9a8aff"},{color:"#9a8aff"}],shadow:!0}],credits:{enabled:!1},tooltip:{crosshairs:!0,crosshairs:{snap:!1,zIndex:1},followPointer:!0,formatter:function(){return this.points.reduce(function(e,t){return e+"<br/>"+t.y+": <strong>"+_[t.y]+"</strong>"},$(this.x))},shared:!0,borderRadius:22},xAxis:{gridLineWidth:1,gridZIndex:0,plotLines:[{zIndex:2,color:"cornflowerblue",width:2,value:x+T/60,label:{text:"".concat(new Date(Date.parse("0000-01-01 ".concat(Y(x),":").concat(Y(T)))).toLocaleTimeString().replace(/:00 AM/," am").replace(/:00 PM/," pm"),", <strong>").concat(_[{...m.filter(e=>e[0]===Math.round(x+T/60))[0]}[1]],"</strong>"),textAlign:"".concat(x<13?"left":"right"),verticalAlign:"top",fontSize:12,style:{fontSize:"1rem",transform:"translate(".concat(x<13?".25rem":"-.9rem",", 1.2rem)"),color:"#333"},rotation:0}}],tickInterval:1,dateTimeLabelFormats:{hour:{main:"%l"}},labels:{formatter(){const e=this.axis.defaultLabelFormatter.call(this);return $(e)},style:{}},crosshairs:{snap:!1,color:"gray",dashStyle:"shortdot",width:1}},yAxis:{allowDecimals:!1,title:"",max:12,gridZIndex:-1,labels:{style:{}}}};return n.a.createElement("div",null,n.a.createElement(r.a,{containerProps:{style:{height:"calc(100vh - 9em)",width:"calc(100vw - 2em)",position:"fixed",backgroundColor:"#eee0"}},highcharts:i.a,options:B}),n.a.createElement("div",{style:{padding:"calc(100vh - 9.25em) 1em 1em",zIndex:"-5"}},n.a.createElement("form",{style:{backgroundColor:"#fff0",display:"flex",justifyContent:"flex-start"}}),n.a.createElement("form",{style:{marginTop:"1em",backgroundColor:"#fff0",display:"flex",justifyContent:"space-between"}},n.a.createElement("label",{htmlFor:"zipcode"},"Zipcode:",n.a.createElement("input",{style:{width:"4em"},type:"tel",pattern:"^\\d*$",name:"zipcode",value:u,maxLength:"5",ref:R,onChange:e=>{5===u.length&&F(A),d(e.target.value.replace(/\D/,"").slice(0,5))}})),n.a.createElement("label",{htmlFor:"city"},"City, State:",n.a.createElement("input",{style:{width:"10em"},type:"text",pattern:"^[a-z], *[A-Z]{2}*$",name:"city",value:g,ref:N,onChange:e=>{var t;f(e.target.value.replace(/\d/,"")),g.length>3&&2===(null===g||void 0===g?void 0:null===(t=g.split(/\, */)[1])||void 0===t?void 0:t.length)&&J()}}),n.a.createElement("button",{style:{marginRight:"1em",lineHeight:1.2,opacity:.7},onClick:e=>{J(),e.preventDefault()},disabled:2!==(null===g||void 0===g?void 0:null===(o=g.split(/\, */)[1])||void 0===o?void 0:o.length)},"\ud83d\udd0d"),n.a.createElement("button",{style:{marginRight:"1em"},onClick:e=>{e.preventDefault(),f(""),d(""),z(!M),y(!1)}},"clear")),n.a.createElement("button",{onClick:e=>{navigator.geolocation.getCurrentPosition(Z,e=>console.error(e.message)),F(A),e.preventDefault()}},"use my location"))))};Object(c.render)(n.a.createElement(u,null),document.getElementById("root"))}},[[5,1,2]]]);
//# sourceMappingURL=main.d6e4f299.chunk.js.map