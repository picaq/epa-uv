(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){},5:function(e,t,a){e.exports=a(6)},6:function(e,t,a){"use strict";a.r(t);var o=a(0),n=a.n(o),c=a(3),l=a(4),r=a.n(l),s=a(1),i=a.n(s);a(11);const u=()=>{var e,t,a;const c=window.location.href.match(/\d{5}/)&&window.location.href.match(/\d{5}/)[0],[l,s]=Object(o.useState)(c||"95377"),[u,d]=Object(o.useState)(c||"94108"),[g,m]=Object(o.useState)("San Francisco, CA"),[f,p]=Object(o.useState)([]),[v,h]=Object(o.useState)(!1),[w,y]=Object(o.useState)(!1),b=new Date((new Date).toLocaleDateString()),D=new Date((new Date).setDate((new Date).getDate()+1)).toLocaleDateString(),E=new Date((new Date).setDate((new Date).getDate()-1)).toLocaleDateString(),S=new Date((new Date).toLocaleString()),[T,x]=Object(o.useState)(S.getHours()),[O,A]=Object(o.useState)(S.getMinutes()),j=b.toISOString().slice(0,10).replace(/-/g,""),[I,L]=(new Date(E).toISOString().slice(0,10).replace(/-/g,""),new Date(D).toISOString().slice(0,10).replace(/-/g,""),Object(o.useState)(j)),[U,C]=Object(o.useState)("city, state"),[M,V]=Object(o.useState)(b),[k,_]=Object(o.useState)(!1),z=["low","low","low","moderate","moderate","moderate","high","high","very high","very high","very high","extreme","extreme","extreme","extreme","extreme"],H=["\ud835\udfce","\ud835\udfcf","\ud835\udfd0","\ud835\udfd1","\ud835\udfd2","\ud835\udfd3","\ud835\udfd4","\ud835\udfd5","\ud835\udfd6","\ud835\udfd7","\ud835\udfcf\ud835\udfce","\ud835\udfcf\ud835\udfcf","\ud835\udfcf\ud835\udfd0","\ud835\udfcf\ud835\udfd1","\ud835\udfcf\ud835\udfd2","\ud835\udfcf\ud835\udfd3"];Object(o.useEffect)(()=>{const e=e=>{let{key:t}=e;return"Escape"===t&&(d(""),m(""),_(!k),void h(!1))};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[]);const P=async e=>{const t=e.coords;try{const e=await fetch("https://data.epa.gov/efservice/getEnvirofactsUVHourly/LATITUDE/".concat(t.latitude,"/LONGITUDE/").concat(t.longitude,"/JSON")),a=await e.json();console.log(a),p(null===a||void 0===a?void 0:a.filter(e=>0!=e.UV_VALUE).map(e=>[new Date(e.DATE_TIME.replace(/ AM/,":00 am").replace(/ PM/,":00 pm")).getHours(),e.UV_VALUE])),console.log(a),console.log(f);const[o,n]=[a[0].CITY,a[0].STATE];C("".concat(o,", ").concat(n)),V(new Date(a[0].DATE_TIME.split(" ")[0])),h(!1),d("")}catch(v){console.error(v.message),console.error(void 0,void 0,"is not found!")}},Z=async function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(5===u.length)try{const e=await fetch("https://data.epa.gov/efservice/getEnvirofactsUVHourly/ZIP/".concat(u,"/JSON")),t=await e.json();p(null===t||void 0===t?void 0:t.filter(e=>0!=e.UV_VALUE).map(e=>[new Date(e.DATE_TIME.replace(/ AM/,":00 am").replace(/ PM/,":00 pm")).getHours(),e.UV_VALUE])),console.log(t),console.log(f);const[a,o]=[t[0].CITY,t[0].STATE];C("".concat(a,", ").concat(o)),V(new Date(t[0].DATE_TIME.split(" ")[0])),h(!1)}catch(v){console.error(v.message),console.error(u,"is not found!"),h(!0)}},F=async()=>{if(g.match(/[a-z+], *[A-Z]{2}/i)){const e=g.trim().split(/\s*,/);try{const t=await fetch("https://data.epa.gov/efservice/getEnvirofactsUVHourly/CITY/".concat(e[0].trim(),"/STATE/").concat(e[1].trim(),"/JSON")),a=await t.json();p(null===a||void 0===a?void 0:a.filter(e=>0!=e.UV_VALUE).map(e=>[new Date(e.DATE_TIME.replace(/ AM/,":00 am").replace(/ PM/,":00 pm")).getHours(),e.UV_VALUE])),console.log(a),console.log(f);const[o,n]=[a[0].CITY,a[0].STATE];C("".concat(o,", ").concat(n)),V(new Date(a[0].DATE_TIME.split(" ")[0])),y(!1),d("")}catch(v){console.error(v.message),console.error(g,"is not found!"),h(!0)}}},J=Object(o.useRef)(null),R=Object(o.useRef)(null);Object(o.useEffect)(()=>{const e=setInterval(()=>{new Date;A(new Date((new Date).toLocaleString()).getMinutes()),x(new Date((new Date).toLocaleString()).getHours())},2e4);return()=>clearInterval(e)},[]),Object(o.useEffect)(()=>{u.length<5&&(J.current.focus(),h(!1))},[k]),Object(o.useEffect)(()=>{g.length<3&&(R.current.focus(),h(!1))},[k]),Object(o.useEffect)(()=>{(e=>{const t=Object.fromEntries(e)[T]||"0";document.title="\ud83c\udf3b UV Index: ".concat(H[t]," ").concat(z[t]),console.log({values:e})})(f)},[T,f,u]),Object(o.useMemo)(()=>{Z(I)},[u]);const N=(e,t)=>String(e).padStart(t,"0"),Y=e=>0==e||24==e?"12\u2009am":e>0&&e<12?"".concat(e,"\u2009am"):12==e?"12\u2009pm":e>12&&e<24?"".concat(e-12,"\u2009pm"):e,$={style:{color:"#ddd"},chart:{type:"spline",backgroundColor:"#eee0"},title:{text:'UV Index for <span style="opacity: '.concat(.5+u.length/10,"; fill: ").concat(v&&"#e82a0eaa","; font-style: ").concat(v&&"italic",'">').concat(u,"</span><span> ").concat(U,"</span>")},subtitle:{text:"\n      ".concat(b.getDay()===(null===(e=new Date(M))||void 0===e?void 0:e.getDay())?"Today":"Tomorrow",": ").concat(null===(t=new Date(M))||void 0===t?void 0:t.toLocaleDateString("US-en",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))},series:[{name:U,data:f,style:{},dataLabels:{enabled:!0,padding:7,color:"#555",style:{fontSize:"1rem"}},zones:[{value:1,color:"#4eb600"},{value:2,color:"#4eb600"},{value:3,color:"#99cc02"},{value:4,color:"#f8e200"},{value:5,color:"#f7b501ff"},{value:6,color:"#f88600ee"},{value:7,color:"#f95900cc"},{value:8,color:"#e82a0eaa"},{value:9,color:"#d7031a99"},{value:10,color:"#ff029888"},{value:11,color:"#b449ff"},{value:12,color:"#9a8aff"},{value:13,color:"#9a8aff"},{value:14,color:"#9a8aff"},{color:"#9a8aff"}],shadow:!0}],credits:{enabled:!1},tooltip:{crosshairs:!0,crosshairs:{snap:!1,zIndex:1},followPointer:!0,formatter:function(){return this.points.reduce(function(e,t){return e+"<br/>"+t.y+": <strong>"+z[t.y]+"</strong>"},Y(this.x))},shared:!0,borderRadius:22},xAxis:{gridLineWidth:1,gridZIndex:0,plotLines:[{zIndex:2,color:"cornflowerblue",width:2,value:T+O/60,label:{text:"".concat(new Date(Date.parse("0000-01-01 ".concat(N(T),":").concat(N(O)))).toLocaleTimeString().replace(/:00 AM/," am").replace(/:00 PM/," pm"),", <strong>").concat(z[{...f.filter(e=>e[0]===Math.round(T+O/60))[0]}[1]],"</strong>"),textAlign:"".concat(T<13?"left":"right"),verticalAlign:"top",fontSize:12,style:{fontSize:"1rem",transform:"translate(".concat(T<13?".25rem":"-.9rem",", 1.2rem)"),color:"#333"},rotation:0}}],tickInterval:1,dateTimeLabelFormats:{hour:{main:"%l"}},labels:{formatter(){const e=this.axis.defaultLabelFormatter.call(this);return Y(e)},style:{}},crosshairs:{snap:!1,color:"gray",dashStyle:"shortdot",width:1}},yAxis:{allowDecimals:!1,title:"",max:12,gridZIndex:-1,labels:{style:{}}}};return n.a.createElement("div",null,n.a.createElement(r.a,{containerProps:{style:{height:"calc(100vh - 9em)",width:"calc(100vw - 2em)",position:"fixed",backgroundColor:"#eee0"}},highcharts:i.a,options:$}),n.a.createElement("div",{style:{padding:"calc(100vh - 9.25em) 1em 1em",zIndex:"-5"}},n.a.createElement("form",{style:{backgroundColor:"#fff0",display:"flex",justifyContent:"flex-start"}}),n.a.createElement("form",{style:{marginTop:"1em",backgroundColor:"#fff0",display:"flex",justifyContent:"space-between"}},n.a.createElement("label",{htmlFor:"zipcode"},"Zipcode:",n.a.createElement("input",{style:{width:"4em"},type:"tel",pattern:"^\\d*$",name:"zipcode",value:u,maxLength:"5",ref:J,onChange:e=>{5===u.length&&Z(I),d(e.target.value.replace(/\D/,"").slice(0,5))}})),n.a.createElement("label",{htmlFor:"city"},"City, State:",n.a.createElement("input",{style:{width:"10em"},type:"text",pattern:"^[a-z], *[A-Z]{2}*$",name:"city",value:g,ref:R,onChange:e=>{var t;m(e.target.value.replace(/\d/,"")),g.length>3&&2===(null===g||void 0===g?void 0:null===(t=g.split(/\, */)[1])||void 0===t?void 0:t.length)&&F()}}),n.a.createElement("button",{style:{marginRight:"1em",lineHeight:1.2,opacity:.7},onClick:e=>{F(),e.preventDefault()},disabled:2!==(null===g||void 0===g?void 0:null===(a=g.split(/\, */)[1])||void 0===a?void 0:a.length)},"\ud83d\udd0d"),n.a.createElement("button",{style:{marginRight:"1em"},onClick:e=>{e.preventDefault(),m(""),d(""),_(!k),y(!1)}},"clear")),n.a.createElement("button",{onClick:e=>{navigator.geolocation.getCurrentPosition(P,e=>console.error(e.message)),Z(I),e.preventDefault()}},"use my location"))))};Object(c.render)(n.a.createElement(u,null),document.getElementById("root"))}},[[5,1,2]]]);
//# sourceMappingURL=main.fe1bc651.chunk.js.map